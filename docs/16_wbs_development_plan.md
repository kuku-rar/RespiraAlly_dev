# 專案工作分解結構 (WBS) 開發計劃 - RespiraAlly

---

**文件版本 (Document Version):** `v1.1`
**最後更新 (Last Updated):** `2025-11-03`
**主要作者 (Lead Author):** `[專案經理]`
**審核者 (Reviewers):** `[技術負責人, 產品經理]`
**狀態 (Status):** `進行中`

---

## 1. 專案總覽 (Project Overview)

### 🎯 專案基本資訊

| 項目 | 內容 |
|------|------|
| **專案名稱** | RespiraAlly (健康陪跑語音機器人) |
| **專案經理** | [姓名] |
| **技術主導** | [姓名] |
| **專案狀態** | 進行中 |

### ⏱️ 專案時程規劃

| 項目 | 日期/時間 |
|------|----------|
| **總工期** | [待估算] |
| **第一階段 (核心 MVP)** | [已完成] |
| **第二階段 (完整 MVP)** | [進行中] |
| **預計交付** | [YYYY-MM-DD] |

---

## 2. WBS 結構總覽 (WBS Structure Overview)

本專案的開發工作主要圍繞兩個核心階段進行分解。

```
1.0 核心 MVP (Text-First) 開發
├── 1.1 後端開發 (Web-App)
├── 1.2 前端開發 (Therapist Dashboard)
├── 1.3 病患端開發 (LINE LIFF)
├── 1.4 AI 服務開發 (AI-Worker)
└── 1.5 基礎設施與部署

2.0 完整 MVP (Voice-Enabled) 開發
├── 2.1 後端開發 (Web-App)
├── 2.2 病患端開發 (LINE LIFF)
└── 2.3 AI 服務開發 (AI-Worker)

3.0 專案管理與文件
├── 3.1 需求與架構文件維護
└── 3.2 測試與品質保證
```

---

## 3. 詳細任務分解 (Detailed Task Breakdown)

### 1.0 核心 MVP (Text-First) 開發

**核心目標：快速上線，驗證核心的健康追蹤與文字互動流程。**

#### 1.1 後端開發 (Web-App)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 1.1.1 | 建立使用者認證 API (`/auth`) | [DEV] | ✅ | - |
| 1.1.2 | 建立病患資料 API (`/patients`) | [DEV] | ✅ | 1.1.1 |
| 1.1.3 | 建立健康日誌 CRUD API (`/daily_metrics`) | [DEV] | ✅ | 1.1.1 |
| 1.1.4 | 建立問卷 CRUD API (`/questionnaires`) | [DEV] | ✅ | 1.1.1 |
| 1.1.5 | 建立治療師儀表板數據 API (`/overview`) | [DEV] | ✅ | 1.1.2 |
| 1.1.6 | 建立 LINE Webhook 端點以接收文字訊息 | [DEV] | ✅ | - |
| 1.1.7 | 實作 RabbitMQ 任務發布邏輯 (文字任務) | [DEV] | ✅ | 1.1.6 |

#### 1.2 前端開發 (Therapist Dashboard)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 1.2.1 | 建立登入頁面 | [FE] | ✅ | 1.1.1 |
| 1.2.2 | 開發儀表板主佈局 | [FE] | ✅ | 1.2.1 |
| 1.2.3 | 開發病患列表元件 | [FE] | ✅ | 1.1.5, 1.2.2 |
| 1.2.4 | 開發病患詳情頁面 (含圖表) | [FE] | 🔄 | 1.1.3, 1.1.4 |
| 1.2.5 | 開發整合式聊天室元件 | [FE] | 🔄 | 1.1.6 |

#### 1.3 病患端開發 (LINE LIFF)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 1.3.1 | 開發登入/註冊流程頁面 | [FE] | ✅ | 1.1.1 |
| 1.3.2 | 開發每日健康日誌表單 | [FE] | 🔄 | 1.1.3 |
| 1.3.3 | 開發 CAT/MMRC 問卷頁面 | [FE] | 🔄 | 1.1.4 |
| 1.3.4 | 開發純文字 AI 聊天介面 | [FE] | 🔄 | 1.1.6 |

#### 1.4 AI 服務開發 (AI-Worker)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 1.4.1 | 設定 RabbitMQ 消費者以接收文字任務 | [AI] | ✅ | 1.1.7 |
| 1.4.2 | 建立 RAG 知識庫 (衛教文件向量化) | [AI] | ✅ | - |
| 1.4.3 | 實作 LLM+RAG 的純文字問答 Pipeline | [AI] | ✅ | 1.4.2 |

#### 1.5 基礎設施與部署
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 1.5.1 | 完成 `docker-compose.dev.yml` 所有服務配置 | [DevOps] | ✅ | - |
| 1.5.2 | 建立資料庫初始遷移腳本 | [DEV] | ✅ | - |
| 1.5.3 | 設定開發環境 CI/CD 流程 | [DevOps] | ⬜ | 1.5.1 |

---

### 2.0 完整 MVP (Voice-Enabled) 開發

**核心目標：擴展互動模式，整合語音輸入輸出功能，提升高齡使用者的易用性。**

#### 2.1 後端開發 (Web-App)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 2.1.1 | 新增音檔上傳 API (`/voice/chat`) | [DEV] | ✅ | 1.1.7 |
| 2.1.2 | 更新 RabbitMQ 任務發布邏輯以支援音訊 | [DEV] | ✅ | 2.1.1 |

#### 2.2 病患端開發 (LINE LIFF)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 2.2.1 | 新增「按住錄音」UI 元件 | [FE] | 🔄 | 2.1.1 |
| 2.2.2 | 實作音檔上傳邏輯 | [FE] | 🔄 | 2.2.1 |
| 2.2.3 | 新增 AI 語音回覆的播放功能 | [FE] | 🔄 | 2.3.3 |

#### 2.3 AI 服務開發 (AI-Worker)
| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 2.3.1 | 更新 RabbitMQ 消費者以處理音訊任務 | [AI] | ✅ | 2.1.2 |
| 2.3.2 | 整合 STT (語音轉文字) 服務 | [AI] | ✅ | 2.3.1 |
| 2.3.3 | 整合 TTS (文字轉語音) 服務 | [AI] | ✅ | 1.4.3 |
| 2.3.4 | 更新聊天 Pipeline 以支援 STT->LLM->TTS 完整流程 | [AI] | ✅ | 2.3.2, 2.3.3 |

---

### 3.0 專案管理與文件

| 任務編號 | 任務名稱 | 負責人 | 狀態 | 依賴關係 |
|---------|---------|--------|------|----------|
| 3.1.1 | 維護 PRD 文件 (`02_...`) | [PO] | 🔄 | - |
| 3.1.2 | 維護架構與 API 文件 (`05_...`, `06_...`) | [ARCH] | 🔄 | - |
| 3.2.1 | 為核心後端邏輯編寫單元測試 | [DEV] | 🔄 | - |
| 3.2.2 | 編寫 API 契約測試 | [QA] | ⬜ | 1.1.1-1.1.5 |
| 3.2.3 | 執行端到端 (E2E) 測試 | [QA] | ⬜ | 核心 MVP 完成後 |

---

## 4. 風險與議題管理 (Risk & Issue Management)

| 風險項目 | 影響度 | 可能性 | 緩解措施 | 負責人 |
|---------|--------|--------|----------|--------|
| 繁體中文 STT/TTS 服務的準確率不如預期 | 高 | 中 | 尋找備用服務商；在 UI 上提供清晰的文字稿對照，允許使用者手動修正。 | [AI] |
| LLM 回應的穩定性與正確性 | 高 | 中 | 建立更完善的 RAG 知識庫；在 AI 回覆中加入免責聲明與建議就醫的提示。 | [AI] |
| 高齡使用者對 LIFF 介面操作不習慣 | 中 | 高 | 進行使用者測試，簡化 UI 流程，放大字體與按鈕；提供圖文並茂的操作說明。 | [FE], [PO] |
